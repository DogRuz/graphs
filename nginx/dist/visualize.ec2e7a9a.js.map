{"version":3,"sources":["../js/visualize.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","adopt","done","then","apply","__generator","body","_","f","y","t","g","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","server","window","location","hostname","port","button","document","getElementById","status_request","operations","getVector","id","_a","fetch","response","json","data","status","vector","join","getOperation","operation_id","DrawGraph","_this","inputValue","edges","_i","_b","k","new_k","key_operation","_c","_d","_e","a","vector_1","nodes","container","result_data","options","_f","innerHTML","Map","Object","entries","connections","parseInt","undefined","get","set","from","to","vis","DataSet","Array","add","Network","addEventListener"],"mappings":"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","file":"visualize.ec2e7a9a.js","sourceRoot":"../html","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar server = window.location.hostname;\nvar port = \"1337\";\nvar button = document.getElementById('search_click');\nvar status_request = document.getElementById(\"status_request\");\nvar operations = { 1: \"add\", 2: \"mul\", 3: \"subtraction\", 4: \"division\" };\nfunction getVector(id) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(\"http://\" + server + \":\" + port + \"/graph/?id=\" + id)\n                        .then(function (response) {\n                        return response.json().then(function (data) { return ({ status: response.status, body: data }); });\n                    }).then(function (data) {\n                        return \"[\" + data.body.vector.join(\",\") + \"]\";\n                    })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction getOperation(id) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(\"http://\" + server + \":\" + port + \"/operation/?id=\" + id)\n                        .then(function (response) {\n                        return response.json().then(function (data) { return ({ status: response.status, body: data }); });\n                    }).then(function (data) {\n                        return data.body.operation_id;\n                    })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction DrawGraph() {\n    var _this = this;\n    var inputValue = document.getElementById(\"graph\").value;\n    fetch(\"http://\" + server + \":\" + port + \"/parent/?id=\" + inputValue)\n        .then(function (response) {\n        return response.json().then(function (data) { return ({ status: response.status, body: data }); });\n    }).then(function (data) { return __awaiter(_this, void 0, void 0, function () {\n        var result, edges, _i, _a, _b, k, v, new_k, vector, operation_id, key_operation, _c, _d, _e, a, vector_1, nodes, container, result_data, options;\n        return __generator(this, function (_f) {\n            switch (_f.label) {\n                case 0:\n                    if (!(data.status == 200)) return [3 /*break*/, 10];\n                    status_request.innerHTML = \"Success\";\n                    result = new Map();\n                    edges = [];\n                    _i = 0, _a = Object.entries(data.body.connections);\n                    _f.label = 1;\n                case 1:\n                    if (!(_i < _a.length)) return [3 /*break*/, 9];\n                    _b = _a[_i], k = _b[0], v = _b[1];\n                    new_k = parseInt(k);\n                    if (!(result.get(new_k) == undefined)) return [3 /*break*/, 8];\n                    return [4 /*yield*/, getVector(new_k)];\n                case 2:\n                    vector = _f.sent();\n                    result.set(new_k, vector);\n                    return [4 /*yield*/, getOperation(new_k)];\n                case 3:\n                    operation_id = _f.sent();\n                    key_operation = 99999 + operation_id;\n                    result.set(key_operation, operations[operation_id]);\n                    edges.push({ from: key_operation, to: new_k });\n                    _c = [];\n                    for (_d in v)\n                        _c.push(_d);\n                    _e = 0;\n                    _f.label = 4;\n                case 4:\n                    if (!(_e < _c.length)) return [3 /*break*/, 8];\n                    a = _c[_e];\n                    if (!(result.get(v[a]) == undefined)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, getVector(v[a])];\n                case 5:\n                    vector_1 = _f.sent();\n                    // @ts-ignore\n                    result.set(v[a], vector_1);\n                    _f.label = 6;\n                case 6:\n                    // @ts-ignore\n                    // @ts-ignore\n                    edges.push({ from: v[a], to: key_operation });\n                    _f.label = 7;\n                case 7:\n                    _e++;\n                    return [3 /*break*/, 4];\n                case 8:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 9:\n                    nodes = new vis.DataSet();\n                    // @ts-ignore\n                    Array.from(result, function (_a) {\n                        var k = _a[0], v = _a[1];\n                        nodes.add({ id: k, label: v });\n                    });\n                    container = document.getElementById('mynetwork');\n                    result_data = {\n                        nodes: nodes,\n                        edges: edges\n                    };\n                    options = {};\n                    // @ts-ignore\n                    new vis.Network(container, result_data, options);\n                    return [3 /*break*/, 11];\n                case 10:\n                    if (data.status == 404) {\n                        status_request.innerHTML = \"Not Found\";\n                    }\n                    _f.label = 11;\n                case 11: return [2 /*return*/];\n            }\n        });\n    }); });\n}\nbutton.addEventListener('click', DrawGraph);\nvar nodes = new vis.DataSet([\n    { id: 1, label: 'Node 1' },\n    { id: 2, label: 'Node 2' },\n    { id: 3, label: 'Node 3' },\n    { id: 4, label: 'Node 4' },\n    { id: 5, label: 'Node 5' }\n]);\n// create an array with edges\nvar edges = [\n    { from: 1, to: 3 },\n    { from: 1, to: 2 },\n    { from: 2, to: 4 },\n    { from: 2, to: 5 },\n    { from: 3, to: 3 }\n];\n// create a network\n"]}